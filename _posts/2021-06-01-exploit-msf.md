# Exploit Nedir?
Bir bilgisayar sistemlerinde bulunan zayıflıklar yada zaafiyetler için kullanılan scriptler yada programlardır. Yani bir sistemin açıklarından istifade ederek o sistemi sömürmeyi
sağlayan ufak programlardır. Exploit sayesinde hedef sisteme izinsiz giriş yapabilir, sistemlerine permission root olarak girebilir, yeni userlar ekleyebilir, olanı yükseltebilir,
sistemi devre dışı bırakılabilmektedir. Exploitler genellikle açık kaynak kodlarla yazılır bunun sebebi sistemin işleyişini kullanıcılara gösterip kötü niyetli yazılımları kullanıcılara
göstererek sistemlerine bulaşmasını önlemeyi sağlamaktır. Tersine mühendislik yöntemleri kullanarak bir exploit çözümlenebilmektedir. Exploit türleri vardır.

### Remote Exploit 
Uzaktan çalıştırılan yada local olarak iletişim kurulan exploittir.

### Local Exploit 
Sistemin yetkili kişilerinin özelliklerini kullanmaya sağlayan ve sistemin içerinde bulunan exploittir.

### Client Side Exploit
Çalışabilmesi için clientların tetiklemesi gereken ve network üzerinde sistemle etkileşimde bulunan genellikle sosyal mühendislik saldırılarında kullanılan exploit çeşidir.

### Zero Day Exploit 
Bu exploitler daha öncesinde çözümlemesi bulunmamış, işletim sistemini yapan yada programı yapan kişi tarafından daha yaması daha yayınlanmamış exploitlerdir. Genellikle kötü niyetli 
hackerlar bu exploit çeşitlerini duyurmazlar ki sisteme sessizce sızabilmek için.

### Dos Exploit
Bu exploit bir sistem üzerinde bulunan ilk açığa yazılan exploittir bu şekilde sistemi yavaşlatmakta yada tamamen durdurmaktadır. Genellikle işletim sistemleri güncelleştirmek için
yazılmış yazılımların versiyonlarında karşımıza çıkmıştır.

## Bir exploiti geliştirme süreci:

### Bilgi Toplama
İlk olarak bilgi toplama süreci gerçekleşir bunun için ise Google, Shodan, Whois, Web Siteleri, Nslookup gibi yerlerden öğrenebiliriz.

### Tarama
Elde edilen veriler doğrultusunda Nmap, Sslscan, Nessus gibi toollardan taramalar gerçekleştirilir.

### Erişim Sağlama
Metasploit, Arpspoof, Dnstunnel, ssh gibi araçlar kullanarak sisteme erişim sağlanmaktadır.

### Erişimi Sürdürme
Ssh, netcat gibi araçlar kullanarak erişimin devamı sağlanmaktadır.

### Saldırıyı Gizleme
Sshtunnel, dnstunnel gibi araçlar ile gerçekleştirilen saldırı gizli tutulmaktadır.

## Exploit Search

### ExploitDB

Ücretsiz olarak exploitlere ulaştığımız popüler bir exploit veritabanıdır. Özel veya genel kaynaklardan elde edilen açıkların toplanması ile oluşturulur. Bu platformda hem
istismarları hemde savunmasız olan uygulamaları arayabilirsiniz. Aramaları çeşitli filtrelemeler ile istediğiniz exploitleri özelleştirebilirsiniz.
ExploitDB sitesinde güncel yayınlanan exploitlere ulaşabiliriz. Exploit araştırması yapmak için "searchsploit" ise ExploitDB deki exploitleri bize terminalden veren ve exploitler hakkında detaylı bilgi veren tooldur.

![m1](https://user-images.githubusercontent.com/55113204/120246397-cca28880-c278-11eb-9b48-ca0e9177a1fb.PNG)


### Rapid7

Metasploitin yazarları infosec ürünlerinde başarılı oldukları için bunun web sitesini geliştirerek Rapid7'i güvenlik açıklarını ve modülleri (açıkları) aramak için güvenli ve hızlı 
bir yol olarak sunmuşlardır. Exploitleri aşağıdaki gibi bulabiliriz.

![m2](https://user-images.githubusercontent.com/55113204/120246534-27d47b00-c279-11eb-84e7-e4ef7c773305.PNG)

Elde ettiğimiz exploitleri ise metasploit consoleden aşağıdaki şekilde çalıştırabiliriz.

![m3](https://user-images.githubusercontent.com/55113204/120246762-e4c6d780-c279-11eb-80d1-42960ee0e9a5.PNG)

### CX Security

Bu database local yada remote güvenlik açıklarını listeleyip, filtreleyip bu exploitlerin yazarlarını, yayın tarihlerini ve diğer önemli detaylı bilgileri web arayüzünden en son istismara
erişim sunmaktadır. 

![m9](https://user-images.githubusercontent.com/55113204/120248501-1e9adc80-c280-11eb-9a03-50e258388ede.PNG)

### ODay

Inj3ct0r olarakta bilinen ve 0day.today, Bitcoin, Litecoin ve Ethereum gibi dijital para birimlerini kullanarak açıkları keşfetmenin, bunları anonim olarak alarak ve satarak
tam hizmetli bir yolu olduğunu söyleyen bir databasedir.

![m8](https://user-images.githubusercontent.com/55113204/120248458-e8f5f380-c27f-11eb-9d2c-28d15bb5ac4a.PNG)


### SecurityFocus

Symantec tabanlı bir topluluk olan ve güvenlik açıklarını bulabileceğiniz ve sonuçları satıcı, başlık ve yazılım sürümüne göre filtreleyebileceğiniz, gezinmesi kolay bir web 
arayüzünden CVE'lere ve istismarlara doğrudan erişim sunar. 2019'dan beri güncellenmediği için en son açıkları buradan bulamazsınız.

![m6](https://user-images.githubusercontent.com/55113204/120248275-26a64c80-c27f-11eb-91ad-c2cacac17872.PNG)


### Packet Storm Security

güvenlik açıklarını ve tavsiyeleri paylaşmanın yanı sıra PoC'ler, demolar ve yerel ve uzak güvenlik açıkları için çalışan istismarlarla ilgili bilgileri paylaşmaya adanmış 
bir istismar topluluğudur.

![m4](https://user-images.githubusercontent.com/55113204/120248142-b4ce0300-c27e-11eb-8512-4671797ef492.PNG)

### Vulnerability Lab

Tarih, risk puanı, etkilenen sürüm, güvenlik açığı türü (uzak veya yerel), yazar, tahmini fiyat, güvenlik açığı sınıfı ve daha fazlası gibi güvenlik açığıyla ilgili tüm 
ayrıntıları içeren araştırma amaçları için açıklardan yararlanmalar ve PoC'lerle tamamlanmış büyük bir güvenlik açığı veritabanına erişim sunan platformdur.

![m5](https://user-images.githubusercontent.com/55113204/120248245-0b3b4180-c27f-11eb-9faf-4a7239fe3c0b.PNG)

### Google Hacking Database

Bunlar bir istismar değil bir "google dorks" olsa da genel mantık olarak aynı şekilde çalışırlar. İhtiyacınız olan bilgiyi buradaki arama yöntemleri ile arayıp elde 
edebilirsiniz. ExploitDB de burası için bir alan bulunmaktadır.

![m7](https://user-images.githubusercontent.com/55113204/120248392-b51ace00-c27f-11eb-82bb-24dde6cc3506.PNG)

## Exploit Türleri

### Auditing Client-Side Exploits

İstemci taraflı yazılımlar, istemciler tarafındaki güvenliği ihlal etmiş, sunucular tarafından gelebilecek saldırılara açık hale gelmiş ve istemcilerinin bağlantısını dinleyen yazılımlardır. 3 tip istemci taraflı exploit vardır.

*** Traditional Client-side Exploits

Tarayıcıları, tarayacı eklentilerini ve e-posta istemcilerini etkileyen bu exploit botnet oluşturarak ve belirli kuruluşları etkileyerek sosyal mühendislik ve kötü amaçlı bilgiler içeren içerik kombinasyonları kullanarak çok sayıda istemci tarafında exploitleri vardır.

*** Clients with Exposed Services

Bir istemcinin ağ üzerinde açık bir soketi varsa, bu soket açık ve ağ üzerinden iletişim kuruyorsa ayrıca bir güvenlik duvarı yoksa, ana bilgisayardan doğrudan geniş bant genişliği ile internete bağlıysa e-posta açma gibi herhangi bir kullanıcı etkileşimi gerekmeksizin doğrudan saldırıya uğrayabilir. Nessus taraması kimlik bilgilerini girmeden yapılandırıldığın default olarak Nessus aracı client ve server tarafında açılan tüm savunmasız hizmetler için taramalar yapacaktır. Çeşitli kombinasyonlar ile yazılım sınıfları eklenebilmektedir. Yada Nessus 5 versiyonunda eklenti olarak seçenekler oluşturulabilir.

*** Clients Exposed to Hostile Servers

Server düşmanca veriler barındırmadan direk bir clienta saldırarak onu manipüle etmektedir. Örnek olarak CVE-2005-0467 tanımlanan güvenlik açığı PuTTY SSH ve SCP gibi clientler üzerinde kötü niyetli bir SSH server taraflı bağlanan ana bilgisayarda kod yürütmek için kullanılmaktadır. Gentoo ise bu exploiti algılayan bir onaylanmış yerel Nessus eklentisidir. Genellikle sosyal mühendislik istismarlarından ziyade firewalları atlatmak için kullanılır. 

### Heap Based Exploits

Yığın Tabanlı Exploit olarak bilinen bu istismar bir veri giriş dosyasına bir shell kodu yerleştirerek veriyi işleme aşamasında güvenlik açığı oluşmasını sağlamaktadır. Yığın, burada veri isteklerinin gerçekleştirildiği bir bellek havuzudur. Saldırgan verileri bir yığın olarak girdiği zaman alt kısımdaki veriler taşmaya başlar yada kullanıcıdan veri alınıp bu veri doğrulamadan çoğaltılırsa da verilerde taşabilmektedir. Çoğunlukla saldırganların eklemiş oldukları veriler doğrultusunda rastgele kod yürütülmesine yol açarak  bir sistem ve uygulama ihlaline yol açabilir.

### Stack Based Exploits

Remote olarak sistemin kod yürütme işlemini ele geçirmek için kullanılan exploit türüdür. Ara bellek taşmasını yığın tabanlı olarak yapan bu istismar, yığın alanındaki veriler dolduğu zaman taşma sağlamaktadır. LIFO gibi çalışmaya benzer. Saldırgan bazı kötü amaçlı kodlara yığına göndererek, programın akışını yeniden yönlendirebilecek ve programı zorlamayı amaçlamaktadır. Saldırgan bunu dönüş işaretçisinin üzerine yazarak kontrol akışının kötü amaçlı koda geçmesini sağlamaktadır. 

### Integer Bug Exploits

C işlemlerinin anlamını öngörmeyen programcılar nedeniye oluşan bu exploit genellikle dolaylı olarak sömürülmektedir. Ve bu hataların maaliyetleri genellikle yüksektir. Tam sayı hataları dolaylı olarak tetiklendiğinden, bir saldırganın belleğin diğer yönlerini tehlikeye atmasına ve bir uygulama üzerindeki denetimi güvence altına almasına olanak tanır. Çoğu hatayı düzelteseniz bile birçok tamsayı güvenlik açığı yine de istismar edilebilir hale gelir.

### Format String Exploits

Kötü amaçlı kod yürütmek, bir yazılımı çökertmek ve yığını okumak amacıyla kullanılan exploit türüdür. Bu exploitte sistemin kararlılığını veya güvenliğini sabote edebilecek yeni davranışları tetikler. Saldırgan rastgele bir printf gibi okuyup ekrana basma araçlarından herhangi birini kontrol ederek değişkene atanan bir arabelleği geçirirse rastgele bellek adresini yazmasıyla olur. Bu şekilde bellekte bilgileri bozabiliriz. Bu şekilde program için bellek sızıntısı yaratılmaktadır. 

### DOS Exploit

DoS saldırısında kullanılabilecek ilgili bir güvenlik açığıdır. Sistemi yavaşlatmayı sağlar. Saldırganların DoS açıklarından çok daha hızlı yararlanabilirler. Bu CVE'ler için DoS exploitleri, uzaktaki bir saldırganın bir durdurma hatasına neden olmasına izin verir. Minimum ağ trafiğiyle doğrudan internete maruz kalan clientlar mavi ekran görebilmektedir.

### Command-Execution-Exploits

Hedef sistemi tanıyan ve bu hedef sistemde kod çalıştırmayı başaran saldırgan sistem üzerinde tam yetkiye sahip olmasını sağlayan exploittir.

### SQL-Injection-Exploits

Bir veritabanını izleyen ve bu databasede herhangi bir tablo üzerinde değişiklik yapılmasını sağlayan exploittir. Hedef sistemdeki verilere zarar veren bu exploit anlaşılmadan çok fazla verileri değiştirebilmektedir. Bundan dolayı çok risklidir.

### Remote Exploit

Uzak bir bağlantı ile sistemde exploit çalıştırarak vulnerable ile sisteme erişim sağlayamayı sağlar.

### Local Exploit

EXE, GIF veya JPG gibi yada benzer dosyaları sisteme sokup çalıştırarak bilgisayarda bulunan vulnerable yazılım yardımıyla exploitler içerisindeki Shellcodelar çalıştırılarak saldırgan bu işlem ile erişim yetkisini arttırmaktadır.

## Exploit Framework Nedir?

Güvenilir istismar modülleri ve başarılı yeniden konumlandırma için kullanılan aracılar gibi diğer faydalı özellikleri içeren desteklenen yazılım paketleridir. Exploit Frameworkler, algılamayı önlemek için kabuk kodunu ve ağ trafiğini karartmak için farklı yararlanma yüklerini ve diğer benzersiz seçenekleri kullanmanızı sağlar. 
En popüler Exploit Frameworkler : Metasploit Framework, CORE IMPACT, Immunity CANVAS

## Metasploit Nedir?

Popüler bir sızma testi aracı olan Metasploit, sızma testlerini otomatikleştiren ve erişim elde etmek, bilgi toplamak, sistem kontrolünü gerçekleştirmek, ağ ve sunucu güvenlik açıklarını araştırmak ve uygulamaları geliştirme ve dağıtımın herhangi bir aşamasında incelemeyi sağlayan bir araçtır.  

Nmap, SNMP tarama ve  Windows patch enumerationlar ile, Tenable'ın güvenlik açığı tarayıcısı Nessus'a bile bir köprü var. Hemen hemen her keşif aracı Metasploit ile bütünleşir ve aradığınız zırhtaki çatlakları bulmanızı mümkün kılar. Bir zayıflık belirledikten sonra, Metasploit'in geniş ve genişletilebilir veritabanında, o deliği açacak ve sizi içeri sokacak exploiti araştırırsınız. Hedef makinedeyken, Metasploit'in ayrıcalık yükseltme, paket koklama, ekran yakalama, tuş kaydediciler ve döndürme araçları dahil olmak üzere eksiksiz bir sömürü sonrası araçlar paketi içerir. Söz konusu makinenin yeniden başlatılması durumunda kalıcı bir arka kapı da kurabilirsiniz.

## msfconsole Nedir?

Metasploitin ana interfacesi msfconsoledir. msfconsele ile sistemin açıklarından yararlananmayı başlatabilir, dinleyiciler oluşturabilir, yükleri yapılandırabilirsiniz. Metasploit Framework'de (MSF) bulunan hemen hemen tüm seçeneklere verimli bir şekilde erişmenizi sağlar. 

# Metasploit Framework Nedir?
Çeşitli antivürüsleri tarayıp, hazır exploitleri kullanıp, yada tersine mühendislik için araçlarını kullaranarak, backdoorlu dosyalar yapılarak sisteme saldırı gerçekleştirmeyi sağlayan açık kaynak kodlu exploit frameworklerdir.

Terminal üzerinden msfconsole olarak yazdığımda metasploit ekranı bizi karşılamaktadır.

![msfconsole](https://user-images.githubusercontent.com/55113204/123594291-31112300-d7f8-11eb-8844-1331623aae1f.PNG)

Tüm exploitleri görmek için terminale aşağıdaki komut yazılır.

![msfconsole1](https://user-images.githubusercontent.com/55113204/123594649-a5e45d00-d7f8-11eb-9567-273d9b511acd.PNG)

Belirli bir modüldeki exploitleri için girilen örnek komut aşağıdaki gibi yazılır.

![msfconsole2](https://user-images.githubusercontent.com/55113204/123594880-e643db00-d7f8-11eb-90c5-90e06ebfae32.PNG)

Exploiti seçilip kullanılması için aşağıdaki sıra izlenmektedir.

![msfconosole](https://user-images.githubusercontent.com/55113204/123595385-84d03c00-d7f9-11eb-8ada-ef0eeab5bb5c.PNG)

Yapılan ayarlarda show options ile görüntülenmektedir.

![msfconsole3](https://user-images.githubusercontent.com/55113204/123595487-a3363780-d7f9-11eb-8658-84510bae641a.PNG)

Exploitin payloadlarını görüntülemek için aşağıdaki komut yazılmaktadır.

![msfconsoo](https://user-images.githubusercontent.com/55113204/123595760-f5775880-d7f9-11eb-94b2-e657bfe34c00.PNG)

Antivürüsleri atlamak için kullanılacak modül olan encoderleri görüntülemek için ise show encoders komutu kullanılmaktadır.

![msms](https://user-images.githubusercontent.com/55113204/123596103-6454b180-d7fa-11eb-865a-cb5e4d08a3e2.PNG)

msfconsole'i update etmek için de kullanılacak komut şu şekildedir.

![msmsm](https://user-images.githubusercontent.com/55113204/123596389-cf9e8380-d7fa-11eb-863d-6bf712eb6bbb.PNG)

## Shellcode Nedir?
Sisteme sızmak isteyen kişilerin, sistemin içine girdikten sonra ana makinede root olmasını sağlayan ve sistemi kontrol etmeyi sağlayan exploit sırasında kullanılan kodlardır. Derleme gerekmediği için ve hızlıca kodlanabildiği için perl dili kullanılmaktadır.


